{
  "$schema": "https://playground.wordpress.net/blueprint-schema.json",
  "preferredVersions": {
    "php": "8.3",
    "wp": "latest"
  },
  "landingPage": "/pattern-lab-generated",
  "steps": [
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "installTheme",
      "themeZipFile": {
        "resource": "wordpress.org/themes",
        "slug": "twentytwentyfive"
      }
    },
    {
      "step": "runPHP",
      "code": "<?php\n require_once('/wordpress/wp-load.php'); // === SERVER-SIDE PROCEDURAL ENGINE ===\n$seed = isset($_GET['seed']) ? sanitize_text_field($_GET['seed']) : time();\n\n// Seeded RNG\nfunction rng($state) {\n  return ($state * 16807) % 2147483647;\n}\n\n// Generate 10 patterns + 1 page\n$state = $seed % 2147483647;\n$patterns = [];\n$palettes = [['#1a1a2e','#00ff88'], ['#16213e','#ff6b6b'], ['#0f3460','#e94560']];\n$words = ['Cosmos','Nebula','Void','Pulse','Echo','Flux'];\n\nfor ($i = 0; $i < 10; $i++) {\n  $state = rng($state);\n  $type = $state % 3;\n  $palette = $palettes[$state % 3];\n  $title = 'Proc ' . ($type == 0 ? 'Hero' : ($type == 1 ? 'Grid' : 'Quote')) . ' #' . ($i+1);\n  $id = 'proc/pat-' . $seed . '-' . $i;\n\n  if ($type == 0) { // Hero\n    $content = '<!-- wp:cover {\"url\":\"https://source.unsplash.com/1800x1000/?abstract&sig=' . ($state%1000) . '\",\"dimRatio\":60,\"minHeight\":90,\"minHeightUnit\":\"vh\",\"style\":{\"color\":{\"background\":\"' . $palette[0] . '\"}}} -->\\n<div class=\"wp-block-cover\" style=\"min-height:90vh\"><span aria-hidden=\"true\" class=\"wp-block-cover__background has-background-dim-60\" style=\"background-color:' . $palette[0] . '\"></span><img class=\"wp-block-cover__image-background\" alt=\"\" src=\"https://source.unsplash.com/1800x1000/?abstract&sig=' . ($state%1000) . '\" style=\"object-position:50% 50%\"/><div class=\"wp-block-cover__inner-container\"><!-- wp:group {\"layout\":{\"type\":\"constrained\"}} -->\\n<div class=\"wp-block-group\"><!-- wp:heading {\"textColor\":\"white\",\"fontSize\":\"xx-large\"} -->\\n<h2 class=\"has-text-color has-xx-large-font-size\" style=\"color:white\">' . $words[$state%6] . ' ' . $words[($state*7)%6] . '</h2>\\n<!-- /wp:heading -->\\n<!-- wp:paragraph {\"textColor\":\"white\"} -->\\n<p class=\"has-text-color\" style=\"color:white\">Seed: ' . $seed . '</p>\\n<!-- /wp:paragraph -->\\n<!-- wp:buttons -->\\n<div class=\"wp-block-buttons\"><!-- wp:button {\"backgroundColor\":\"custom\",\"style\":{\"color\":{\"background\":\"' . $palette[1] . '\",\"text\":\"white\"}}} -->\\n<div class=\"wp-block-button\"><a class=\"wp-block-button__link has-text-color has-background\" style=\"background-color:' . $palette[1] . ';color:white\">Explore</a></div>\\n<!-- /wp:button --></div>\\n<!-- /wp:buttons --></div>\\n<!-- /wp:group --></div></div>\\n<!-- /wp:cover -->';\n  } elseif ($type == 1) { // Grid\n    $cols = 2 + ($state % 2);\n    $col_blocks = '';\n    for ($j = 0; $j < $cols; $j++) {\n      $state = rng($state);\n      $col_blocks .= '<!-- wp:column -->\\n<div class=\"wp-block-column\"><!-- wp:image {\"sizeSlug\":\"large\"} -->\\n<figure class=\"wp-block-image size-large\"><img src=\"https://source.unsplash.com/600x600/?art&sig=' . ($state%1000) . '\" alt=\"\"/></figure>\\n<!-- /wp:image -->\\n<!-- wp:heading {\"level\":3} -->\\n<h3>Card ' . ($state%100) . '</h3>\\n<!-- /wp:heading -->\\n<!-- wp:paragraph -->\\n<p>Generated.</p>\\n<!-- /wp:paragraph --></div>\\n<!-- /wp:column -->';\n    }\n    $content = '<!-- wp:columns -->\\n<div class=\"wp-block-columns\">' . $col_blocks . '</div>\\n<!-- /wp:columns -->';\n  } else { // Quote\n    $quotes = ['Code is poetry.', 'Seed the future.', 'Art is random.'];\n    $content = '<!-- wp:pullquote {\"style\":{\"color\":{\"background\":\"' . $palette[0] . '\",\"text\":\"#fff\"}}} -->\\n<figure class=\"wp-block-pullquote\" style=\"background:' . $palette[0] . ';color:#fff\"><blockquote><p>' . $quotes[$state%3] . '</p><cite>Engine</cite></blockquote></figure>\\n<!-- /wp:pullquote -->';\n  }\n\n  // Register pattern\n  register_block_pattern($id, [\n    'title' => $title,\n    'content' => $content,\n    'categories' => ['procedural'],\n    'keywords' => ['seed', 'generated']\n  ]);\n\n  if ($i == 0) $first_pattern = $id;\n}\n\n// Create page with first pattern\n$new_seed = rng($state) % 99999;\n$page_content = '<!-- wp:paragraph -->\\n<p><strong>Seed: ' . $seed . '</strong> â€” <a href=\"?seed=' . $new_seed . '\">Regenerate</a></p>\\n<!-- /wp:paragraph -->\\n<!-- wp:pattern {\"slug\":\"' . $first_pattern . '\"} /-->';\n\nwp_insert_post([\n  'post_title' => 'Pattern Lab #' . $seed,\n  'post_content' => $page_content,\n  'post_status' => 'publish',\n  'post_type' => 'page',\n  'post_name' => 'pattern-lab-generated'\n]);\n\n// Redirect to page\nwp_redirect(home_url('/pattern-lab-generated'));\nexit;\n?>"
    }
  ]
}
